<%# エラーメッセージの表示 %>
<% if @error.present? %>
  <p class="alert alert-danger"><%= @error %></p>
<% end %>

<%# フォームの表示 %>
<%= form_with url: pictures_path, method: :post, local: true do |f|  %>
  <div class="form-group">
    <%= f.label :title, "ありがとうメッセージ" %>
    <%= f.text_area :title, value: @title, class: "form-control" %>
  </div>
  <div class="form-group">
    <%= f.label :body, "ありがとうメッセージ" %>
    <%= f.text_area :body, value: @body, class: "form-control" %>
  </div>
  <div class="form-group">
    <%= f.label :tag, "タグ" %>
    <%= f.text_field :tag_names, value: @tag, class: "form-control" %>
  </div>
  <%= f.submit "画像を生成", class: "btn btn-primary" %>
<% end %>

<%# 画像の表示と選択 %>
<% if @images.any? %>
  <h3>生成された画像を選択してください:</h3>
  <%= form_with url: select_image_pictures_path, method: :post, local: true do %>
    <% @images.each do |image_url| %>
      <div class="image-option">
        <%= image_tag image_url, width: 200 %>
        <%= radio_button_tag :image_url, image_url, false %>
      </div>
    <% end %>
    
    <%# 隠しフィールドに title, body, tag_names を再送信 %>
    <%= hidden_field_tag :title, @title %>
    <%= hidden_field_tag :body, @body %>
    <%= hidden_field_tag :tag_names, @tag %>

    <%= submit_tag "選択してBoardを作成", class: "btn btn-success" %>
  <% end %>
<% end %>

